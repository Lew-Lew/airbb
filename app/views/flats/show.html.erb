<h1><%= @flat.name %></h1>
<p><%= @flat.description %></p>
<p><%= @flat.price_per_night %></p>

<div>
  <div style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
</div>

<div>
  <% if flash[:error] %>
    <div class="alert alert-danger">
      <%= flash[:error] %>
    </div>
  <% end %>
  <%= simple_form_for [@flat, @booking] do |f| %>
    <%= f.input :start_date,
                as: :string,
                input_html: { data: { controller: "datepicker" } } %>
    <%= f.input :end_date,
            as: :string,
            input_html: { data: { controller: "datepicker" } } %>
    <%= f.submit "Ask for booking", class: "btn btn-primary" %>
  <% end %>
</div>